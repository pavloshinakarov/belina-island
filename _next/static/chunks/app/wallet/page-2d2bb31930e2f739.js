(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[597],{573:function(e,t,n){Promise.resolve().then(n.bind(n,8628))},8628:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var s=n(7437),a=n(2265),i=n(7138),l=n(1193),o=n(5321),r=n(8726),c=n(7756),d=n(1881),u=n(7287),h=n(6300).Buffer;function m(e){var t=[],n=0;function s(e){var t=h.alloc(1);t.writeUInt8(e,0),a(t)}function a(e){t.push(e),n+=e.length}for(var i=0;i<e.length;i++){var o=e[i],r=o.opcodenum;s(o.opcodenum),o.buf&&(r<l.opcodes.OP_PUSHDATA1?a(o.buf):r===l.opcodes.OP_PUSHDATA1?(s(o.len),a(o.buf)):r===l.opcodes.OP_PUSHDATA2?(function(e){var t=h.alloc(2);t.writeUInt16LE(e,0),a(t)}(o.len),a(o.buf)):r===l.opcodes.OP_PUSHDATA4&&(function(e){var t=h.alloc(4);t.writeUInt32LE(e,0),a(t)}(o.len),a(o.buf)))}return h.concat(t,n)}function p(e){return{buf:e.length?e:void 0,len:e.length,opcodenum:e.length<=75?e.length:e.length<=255?76:77}}function f(e){return{buf:e<=16?void 0:e<128?h.from([e]):h.from([e%256,e/256]),len:e<=16?0:e<128?1:2,opcodenum:0==e?0:e<=16?80+e:e<128?1:2}}function x(e){return{opcodenum:e}}function g(e,t,n){return Math.ceil((40+592*e+136*t)/4*n)}var v=n(6300).Buffer;async function b(e){let t,n,s,a,{toAddress:i,contentType:o,data:r,feeRate:c,utxos:d,publicKey:u,signPsbtHex:h,network:b,fromAddress:j}=e,w=[],N=[];for(;r.length;){let e=r.slice(0,Math.min(240,r.length));r=r.slice(e.length),w.push(e)}let y=[p(v.from("ord","utf8")),f(w.length),p(v.from(o,"utf8")),...w.flatMap((e,t)=>[f(w.length-t-1),p(e)])];for(;y.length;){let e=[];for(0==N.length&&e.push(y.shift());m(e).length<=1500&&y.length;)e.push(y.shift()),e.push(y.shift());m(e).length>1500&&(y.unshift(e.pop()),y.unshift(e.pop()));let a=m([p(u),x(l.opcodes.OP_CHECKSIGVERIFY),...e.map(()=>x(l.opcodes.OP_DROP)),x(l.opcodes.OP_TRUE)]),i=l.crypto.hash160(a),o={script:m([x(l.opcodes.OP_HASH160),p(i),x(l.opcodes.OP_EQUAL)]),value:1e3},r=new l.Psbt({network:b});r.setVersion(1),t&&r.addInput(t),r.addOutput(o);let f=0,w=[],S=[...d];for(;f<=0&&S.length>0;){r.addInput({hash:S[0].txid,index:S[0].vout,sequence:4294967294,nonWitnessUtxo:v.from(S[0].hex,"hex")}),w.push(S[0]),S.shift();let e=0;if(void 0===t&&(e=g(r.data.inputs.length,r.data.outputs.length+1,c)),(f=w.reduce((e,t)=>e+t.value,0)-e-1e3)<0&&S.length<1)throw Error("Insufficient funds");f>0&&r.addOutput({address:j,value:f})}d.splice(0,w.length);let{psbtHex:I,signatures:P}=await h(r.toHex());if(r=l.Psbt.fromHex(I),void 0!==t){let e;if(P&&P[0])e=v.from(P[0],"hex");else throw Error("Signature is undefined or empty");let t=m([...s,p(e),p(n)]);r.finalizeInput(0,(e,n,s)=>({finalScriptSig:t,finalScriptWitness:void 0})),r.data.inputs.forEach((e,t)=>{t&&r.finalizeInput(t)})}else r.finalizeAllInputs();let B=r.extractTransaction(!0);N.push(B.toHex()),d.unshift({txid:r.extractTransaction(!0).getId(),vout:1,value:f,hex:r.extractTransaction(!0).toHex()}),t={hash:B.getId(),index:0,nonWitnessUtxo:B.toBuffer(),redeemScript:a},s=e,n=a}let S=new l.Psbt({network:b});S.setVersion(1),S.addInput(t),S.addOutput({address:i,value:1e3});let I=0,P=[],B=[...d];for(;I<=0&&B.length>0;){S.addInput({hash:B[0].txid,index:B[0].vout,sequence:4294967294,nonWitnessUtxo:v.from(B[0].hex,"hex")}),P.push(B[0]),B.shift();let e=g(S.data.inputs.length,S.data.outputs.length+1,c);if((I=P.reduce((e,t)=>e+t.value,0)-e-1e3)<0&&B.length<1)throw Error("Insufficient funds");I>0&&S.addOutput({address:j,value:I})}let{psbtHex:C,signatures:E}=await h(S.toHex());if(S=l.Psbt.fromHex(C),E&&E[0])a=v.from(E[0],"hex");else throw Error("Signature is undefined or empty");let O=m([...s,p(a),p(n)]);S.finalizeInput(0,(e,t,n)=>({finalScriptSig:O,finalScriptWitness:void 0})),S.data.inputs.forEach((e,t)=>{t&&S.finalizeInput(t)});let A=S.extractTransaction(!0);return N.push(A.toHex()),N}var j=n(6300).Buffer;function w(){return(0,s.jsx)(o.sB,{children:(0,s.jsx)(N,{})})}let N=()=>{let e=(0,a.useRef)(null);(0,a.useRef)(null),(0,a.useRef)(null);let{isConnected:t,nintondo:n}=(0,o.tL)(),[h,m]=(0,a.useState)(),[p,f]=(0,a.useState)(),[x,g]=(0,a.useState)(),[v,w]=(0,a.useState)(null),[N,y]=(0,a.useState)(),[S,I]=(0,a.useState)([]),[P,B]=(0,a.useState)([]),[C,E]=(0,a.useState)(""),[O,A]=(0,a.useState)(""),[T,k]=(0,a.useState)(""),[L,H]=(0,a.useState)(""),[_,F]=(0,a.useState)(""),[R,U]=(0,a.useState)(""),[Z,z]=(0,a.useState)(5),[D,M]=(0,a.useState)(5),[W,$]=(0,a.useState)(5),[q,J]=(0,a.useState)(5),[X,G]=(0,a.useState)("slow"),[V,K]=(0,a.useState)(!1),[Y,Q]=(0,a.useState)(""),[ee,et]=(0,a.useState)(""),[en,es]=(0,a.useState)("0"),[ea,ei]=(0,a.useState)(!1),[el,eo]=(0,a.useState)(1e3),[er,ec]=(0,a.useState)(5),[ed,eu]=(0,a.useState)(),[eh,em]=(0,a.useState)(),ep=async e=>{await fetch(d.c$+"holder/"+e).then(e=>e.json()).then(e=>{e.length>0&&I(e)})},ef=async()=>{await fetch(d.c$+"namespaces").then(e=>e.json()).then(e=>{e.length>0&&(B(e),E(e[0].namespace))})},ex=async()=>{await fetch(d.xf+"fee-estimates").then(e=>e.json()).then(e=>{let t=Object.values(e);J(Math.ceil(t.reduce((e,t)=>e+t,0)/t.length));let n={};t.forEach(e=>{n[e]=(n[e]||0)+1});let s=Object.keys(n).reduce((e,t)=>n[e]>n[t]?e:t),a=Math.max(...t);$(Math.ceil(a)),M(parseInt(s)),"fast"==X?z(Math.ceil(a)):"slow"==X&&z(parseInt(s)),r.ZP.success("Refreshed Fee rate",c.j)})},eg=async e=>{await fetch(d.xf+"address/"+e).then(e=>e.json()).then(e=>{w(e)})},ev=async()=>{await fetch("https://api.coingecko.com/api/v3/coins/bellscoin").then(e=>e.json()).then(e=>{em(e)})},eb=async()=>{if(n)try{await n.provider.connect();let e=await n.provider.getAccount(),t=await (null==n?void 0:n.provider.getBalance());r.ZP.success("Wallet connected",c.j),m(!0),g(e),f(t),ex(),ep(e),e&&eg(e)}catch(e){r.ZP.error("Failed to connect wallet",c.j),console.error("Failed to connect wallet:",e)}else r.ZP.error("Nintondo instance is not initialized",c.j),r.ZP.error("Nintondo instance is not initialized",c.j)},ej=async()=>{if(n)try{let e;ee.includes(".")?await fetch(d.c$+"name/"+ee).then(e=>e.json()).then(t=>{e=t[0].holder}):e=ee;let t=await (null==n?void 0:n.provider.createTx({to:e,amount:parseFloat(en)*d.Fm,receiverToPayFee:ea,feeRate:Z}));n.api.pushTx(t);let s=await (null==n?void 0:n.provider.getBalance());f(s),r.ZP.success("TX pushed succesfully",c.j)}catch(e){r.ZP.error("Failed to create TX:"+e,c.j),console.error("Failed to create TX:",e)}else r.ZP.error("Nintondo instance is not initialized",c.j)},ew=async e=>{if(n){let t="";if("name"==e){if(console.log((O.match(/\./g)||[]).length),(O.match(/\./g)||[]).length>1){r.ZP.error("Name has more than two periods.\n\nExample: 'bellsight.bells'",c.j);return}let e={p:"sns",op:"reg",name:(O.includes(".")?O:O+"."+C).toLocaleLowerCase()};null!==T&&(e.about=T),t=JSON.stringify(e)}else if("namespace"==e){if(!/^[a-zA-Z]+$/.test(L)){r.ZP.error("Only letters are allowed in namespaces.",c.j);return}let e={p:"sns",op:"ns",ns:L.toLocaleLowerCase()};null!==_&&(e.about=_),null!==R&&(e.avatar=R),t=JSON.stringify(e)}console.log(t);let s=await (null==n?void 0:n.provider.getPublicKey()),a={toAddress:x,fromAddress:x,contentType:"application/json",data:j.from(t),feeRate:Z,network:l.networks.bellcoin,utxos:N,publicKey:j.from(s,"hex"),signPsbtHex:async e=>{let t=j.from(e,"hex").toString("base64"),s=await n.provider.signPsbt(t,{autoFinalized:!1}),a=l.Psbt.fromBase64(s).data.inputs.map(e=>e.partialSig[0].signature.toString("hex"));return{psbtHex:j.from(s,"base64").toString("hex"),signatures:a}}};try{let e=await b(a),t=e[0],s=e[1];await (null==n?void 0:n.api.pushTx(t));let i=await (null==n?void 0:n.api.pushTx(s));console.log("INSCRIPTION LOCATION",i);let l=await fetch(d.xf+"tx/"+(null==i?void 0:i.txid)),o=await l.text();JSON.parse(o)}catch(e){r.ZP.error("Inscription Error:\n\n"+e.message,c.j),console.error("Inscription Error",e),eb()}}},eN=e=>{"fast"==e?(G("fast"),z(W)):"slow"==e?(G("slow"),z(D)):"custom"==e&&G("custom")};return(0,a.useEffect)(()=>{ev(),ef()},[]),(0,a.useEffect)(()=>{console.log("Refresh...")},[D,W,h,p]),(0,s.jsxs)("div",{className:"min-h-screen",children:[(0,s.jsx)(u.wp,{}),(0,s.jsxs)("div",{id:"resume",className:"color-white",children:[(0,s.jsx)("h1",{children:"Welcome to Belina Island!"}),"Belina Island is a unique project where the latest Belinal from wallets that have recently donated to the official Bellscoin donation wallet is proudly listed. This initiative not only showcases the generosity of our community but also highlights those contributing to the growth and success of Bellscoin.",(0,s.jsx)("h1",{children:"Why is Belina Island important for our community?"}),"Belina Island has been designed with the goal of raising funds for the official Bellscoin donation wallet, but it offers so much more. By participating in this project, the community benefits in three significant ways: Utility for Bellscoin: The project adds meaningful utility to Bellscoin, increasing its value and relevance. Exposure for Bellinals: It shines a spotlight on Bellinals, giving them well-deserved recognition and visibility. Implicit Marketing: By encouraging donations, the community is not just contributing to a cause but also investing in marketing efforts that help grow and expand the Bellscoin ecosystem. Belina Island is more than just a project—it's a testament to the strength and unity of the Bellscoin community. Together, we are building a future where generosity and innovation go hand in hand."]}),eh&&(0,s.jsxs)("div",{className:"grid grid-flow-row auto-rows-max",children:[(0,s.jsxs)("div",{className:"hidden lg:block",children:[(0,s.jsx)("div",{className:"bg-base-300",children:(0,s.jsxs)("div",{className:"flex justify-between p-4 items-center",children:[h&&(0,s.jsx)("div",{className:"flex gap-2 items-center",children:(0,s.jsxs)("div",{className:"text-center text-sm flex",children:[(0,s.jsxs)("div",{role:"tablist",className:"tabs tabs-boxed",children:[(0,s.jsx)("a",{onClick:()=>eN("slow"),role:"tab",className:"slow"===X?"tab tab-active":"tab",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("div",{children:"SLOW"}),(0,s.jsxs)("div",{children:[D,"/vB"]})]})}),(0,s.jsx)("a",{onClick:()=>eN("fast"),role:"tab",className:"fast"===X?"tab tab-active":"tab",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("div",{children:"FAST"}),(0,s.jsxs)("div",{children:[W,"/vB"]})]})}),(0,s.jsx)("a",{onClick:()=>eN("custom"),role:"tab",className:"custom"===X?"tab tab-active":"tab",children:"CUSTOM"})]}),"custom"==X&&(0,s.jsx)("div",{className:"flex items-center ml-1",children:(0,s.jsx)("input",{type:"text",placeholder:"Fees",className:"font-pixel input input-sm w-20 rounded-lg bg-base-200",value:Z,onChange:e=>{z(parseInt(e.target.value))}})}),(0,s.jsx)("button",{onClick:ex,className:"btn btn-ghost rounded text-2xl ml-1",children:"⟳"})]})}),!h&&(0,s.jsx)("div",{className:"color-white",children:"Please connect your NINTONDO wallet to proceed."}),h&&(0,s.jsxs)("div",{className:"text-center text-sm",children:[(0,s.jsx)("div",{children:"Address:"}),(0,s.jsx)(i.default,{passHref:!0,href:"/address/".concat(x),children:(0,s.jsx)("div",{className:"text-right text-blue-500 hover:text-blue-300 flex truncate",children:x})})]}),h&&(0,s.jsxs)("div",{className:"text-center text-sm",children:[(0,s.jsx)("div",{children:"Balance (without inscriptions):"}),"".concat(p/d.Fm," $BEL (").concat((p/d.Fm*eh.market_data.current_price.usd).toFixed(2),"$)")]}),h&&(0,s.jsxs)("div",{className:"dropdown dropdown-hover",children:[(0,s.jsx)("div",{tabIndex:0,role:"button",className:"btn btn-secondary m-1",children:"Your SNS"}),(0,s.jsx)("ul",{tabIndex:0,className:"grid dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow overflow-y-auto h-40",children:S.map((e,t)=>(0,s.jsx)("li",{children:(0,s.jsx)("a",{children:e.domain})},t))})]}),!h&&(0,s.jsx)("div",{}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{onClick:eb,className:"btn btn-secondary rounded",children:h?"Connected":"Connect Wallet"})})]})}),h&&(0,s.jsxs)("div",{className:"grid grid-cols-2 mt-4 text-sm",children:[(0,s.jsxs)("div",{className:"text-center bg-base-300 rounded-lg m-5 p-4",children:[(0,s.jsx)("div",{className:"mb-3",children:"SEND $BEL to official Bellscoin donation wallet address"}),(0,s.jsxs)("div",{className:"grid gap-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("div",{className:"mr-4",children:"Address/Domain"}),(0,s.jsx)("input",{type:"text",placeholder:"Address/Domain",className:"font-pixel input input-md rounded-lg bg-base-200 w-48",value:"BEGJMVqLYRJkGwvwmsZDDjERpzxGqdyzXT",readOnly:!0,onChange:e=>{et(e.target.value)}})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("div",{children:"Amount in $BEL"}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("button",{className:"btn btn-secondary mr-2",onClick:()=>{es((p/d.Fm).toString())},children:"MAX"}),(0,s.jsx)("input",{type:"text",placeholder:"amount",className:"font-pixel input input-md rounded-lg bg-base-200 w-48",value:en,onChange:e=>{es(e.target.value)}})]})]}),(0,s.jsx)("div",{className:"form-controlflex justify-between items-center",children:(0,s.jsxs)("label",{className:"label cursor-pointer",children:[(0,s.jsx)("span",{className:"label-text",children:"Reciever pays the fee"}),(0,s.jsx)("input",{type:"checkbox",className:"checkbox checkbox-primary",onChange:()=>ei(!ea)})]})}),(0,s.jsx)("button",{onClick:ej,className:"btn btn-secondary rounded",children:"Send $BEL"})]})]}),(0,s.jsxs)("div",{className:"text-center mt-4 bg-base-300 rounded-lg m-5 p-4",children:[(0,s.jsx)("div",{className:"mb-3",children:"Create a Belinial"}),(0,s.jsxs)("div",{className:"grid gap-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("div",{children:"Namespace"}),(0,s.jsx)("input",{type:"text",placeholder:"Namespace",className:"font-pixel input input-md rounded-lg bg-base-200 w-48",value:L,maxLength:10,onChange:e=>{H(e.target.value)}})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("div",{children:"About"}),(0,s.jsx)("input",{type:"text",placeholder:"About",className:"font-pixel input input-md rounded-lg bg-base-200 w-48",value:_,maxLength:140,onChange:e=>{F(e.target.value)}})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("div",{children:"Avatar (inscription ID)"}),(0,s.jsx)("input",{type:"text",placeholder:"Inscription ID",className:"font-pixel input input-md rounded-lg bg-base-200 w-48",value:R,maxLength:100,onChange:e=>{U(e.target.value)}})]}),(0,s.jsx)("button",{className:"btn btn-secondary rounded",onClick:()=>{if(!L){r.ZP.error("Please type in a namespace.",c.j);return}e.current&&(Q("https://content.nintondo.io/api/pub/content/".concat(R)),e.current.showModal())},children:"Inscribe Namespace"}),(0,s.jsx)("dialog",{id:"previewNamespace",className:"modal",ref:e,children:(0,s.jsxs)("div",{className:"modal-box",children:["Are you sure you want to inscribe this namespace?",(0,s.jsxs)("div",{className:"grid items-center mt-4",children:[(0,s.jsx)("div",{children:'p: "sns"'}),(0,s.jsx)("div",{children:'op: "ns"'}),(0,s.jsx)("div",{children:'ns: "'.concat(L.toLocaleLowerCase(),'"')}),(0,s.jsx)("div",{children:""!=_?'about: "'.concat(_.toLocaleLowerCase()):""}),(0,s.jsx)("div",{className:"truncate",children:""!=R?'avatar: "'.concat(R.toLocaleLowerCase(),'"'):""}),(0,s.jsx)("div",{className:"flex justify-center mt-4",children:R&&(0,s.jsx)("img",{src:Y,alt:"none"})})]}),(0,s.jsx)("div",{className:"modal-action",children:(0,s.jsxs)("form",{method:"dialog",children:[(0,s.jsx)("button",{onClick:()=>ew("namespace"),className:"btn btn-secondary rounded",children:"INSCRIBE NAMESPACE"}),(0,s.jsx)("button",{className:"btn",children:"Cancel"})]})})]})})]})]})]})]}),(0,s.jsx)("div",{className:"lg:hidden block text-center",children:"wallet function not yet supported on mobile"})]})]})}}},function(e){e.O(0,[542,726,291,769,287,971,23,744],function(){return e(e.s=573)}),_N_E=e.O()}]);